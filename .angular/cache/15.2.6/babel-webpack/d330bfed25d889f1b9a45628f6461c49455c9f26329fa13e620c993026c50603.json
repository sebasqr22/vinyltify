{"ast":null,"code":"import SpotifyWebApi from 'spotify-web-api-js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class AuthService {\n  constructor(router) {\n    this.router = router;\n    this.client_id = '933d3430c2e6442eac18add3a796497d';\n    this.redirect_uri = \"http://localhost:4200/#/disk\";\n    this.cancelUri = 'http://localhost:4200';\n    this.spotifyApi = new SpotifyWebApi();\n  }\n  generateString(length) {\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let result = ' ';\n    const charactersLength = characters.length;\n    for (let i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  }\n  login() {\n    var state = this.generateString(16);\n    var scope = 'user-top-read';\n    window.location.href = `https://accounts.spotify.com/authorize?client_id=${this.client_id}&redirect_uri=${this.redirect_uri}&response_type=token&show_dialog=true&scope=${scope}&state=${state}&cancelUri=${this.cancelUri}`;\n  }\n  setAccessToken(token) {\n    this.spotifyApi.setAccessToken(token);\n    this.token = token;\n  }\n  getApi() {\n    return this.spotifyApi;\n  }\n  getAccessToken() {\n    return this.token;\n  }\n  logout() {\n    this.spotifyApi.setAccessToken(null);\n    this.router.navigate(['/']);\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.Router));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,OAAOA,aAAa,MAAM,oBAAoB;;;AAM9C,OAAM,MAAOC,WAAW;EAQpBC,YAAoBC,MAAc;IAAd,WAAM,GAANA,MAAM;IAJlB,cAAS,GAAG,kCAAkC;IAC9C,iBAAY,GAAG,8BAA8B;IAC7C,cAAS,GAAG,uBAAuB;IAGvC,IAAI,CAACC,UAAU,GAAG,IAAIJ,aAAa,EAAE;EACzC;EAEAK,cAAc,CAACC,MAAa;IACxB,MAAMC,UAAU,GAAE,gEAAgE;IAClF,IAAIC,MAAM,GAAG,GAAG;IAChB,MAAMC,gBAAgB,GAAGF,UAAU,CAACD,MAAM;IAC1C,KAAM,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,EAAE,EAAG;MAC/BF,MAAM,IAAID,UAAU,CAACI,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;;IAG7E,OAAOD,MAAM;EACjB;EAEAO,KAAK;IACD,IAAIC,KAAK,GAAG,IAAI,CAACX,cAAc,CAAC,EAAE,CAAC;IACnC,IAAIY,KAAK,GAAG,eAAe;IAC3BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,oDAAoD,IAAI,CAACC,SAAS,iBAAiB,IAAI,CAACC,YAAY,+CAA+CL,KAAK,UAAUD,KAAK,cAAc,IAAI,CAACO,SAAS,EAAE;EAChO;EAEAC,cAAc,CAACC,KAAa;IACxB,IAAI,CAACrB,UAAU,CAACoB,cAAc,CAACC,KAAK,CAAC;IACrC,IAAI,CAACA,KAAK,GAAGA,KAAK;EACtB;EAEAC,MAAM;IACF,OAAO,IAAI,CAACtB,UAAU;EAC1B;EAEAuB,cAAc;IACV,OAAO,IAAI,CAACF,KAAK;EACrB;EAEAG,MAAM;IACF,IAAI,CAACxB,UAAU,CAACoB,cAAc,CAAC,IAAI,CAAC;IACpC,IAAI,CAACrB,MAAM,CAAC0B,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;EAC/B;;AA7CS5B,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAA6B,SAAX7B,WAAW;EAAA8B,YAFR;AAAM","names":["SpotifyWebApi","AuthService","constructor","router","spotifyApi","generateString","length","characters","result","charactersLength","i","charAt","Math","floor","random","login","state","scope","window","location","href","client_id","redirect_uri","cancelUri","setAccessToken","token","getApi","getAccessToken","logout","navigate","factory","providedIn"],"sourceRoot":"","sources":["/Users/sebastianqr.2208/Desktop/Status Tech/vinyltify/src/app/auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport { Router } from '@angular/router';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n\n    private spotifyApi: SpotifyWebApi.SpotifyWebApiJs;\n    private token: string | undefined;\n    private client_id = '933d3430c2e6442eac18add3a796497d';\n    private redirect_uri = \"http://localhost:4200/#/disk\";\n    private cancelUri = 'http://localhost:4200';\n\n    constructor(private router: Router) {\n        this.spotifyApi = new SpotifyWebApi();\n    }\n\n    generateString(length:number) {\n        const characters ='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        let result = ' ';\n        const charactersLength = characters.length;\n        for ( let i = 0; i < length; i++ ) {\n            result += characters.charAt(Math.floor(Math.random() * charactersLength));\n        }\n\n        return result;\n    }\n    \n    login(): void {\n        var state = this.generateString(16);\n        var scope = 'user-top-read';\n        window.location.href = `https://accounts.spotify.com/authorize?client_id=${this.client_id}&redirect_uri=${this.redirect_uri}&response_type=token&show_dialog=true&scope=${scope}&state=${state}&cancelUri=${this.cancelUri}`;\n    }\n\n    setAccessToken(token: string): void {\n        this.spotifyApi.setAccessToken(token);\n        this.token = token;\n    }\n\n    getApi(): SpotifyWebApi.SpotifyWebApiJs {\n        return this.spotifyApi;\n    }\n\n    getAccessToken(){\n        return this.token;\n    }\n    \n    logout(){\n        this.spotifyApi.setAccessToken(null);\n        this.router.navigate(['/']);\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}