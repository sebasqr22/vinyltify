{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class DiskComponent {\n  constructor(authService, route) {\n    this.authService = authService;\n    this.route = route;\n    this.actual = 'b1';\n  }\n  ngOnInit() {\n    const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n    if (tieneError == true) {\n      // @ts-ignore\n      const token = this.route.snapshot.fragment.split('&').find(fragment => fragment.includes('access_token')).split('=')[1];\n      // Guardar el token de acceso en el servicio de autenticación\n      this.authService.setAccessToken(token);\n      this.getMe();\n      this.getMyTracks('short_term');\n    } else {\n      alert(\"entra\");\n      this.logout();\n    }\n  }\n  getMe() {\n    var a = this.authService.getApi().getMe();\n    a.then(data => {\n      const elemento = document.getElementById('nombreCliente');\n      if (data.display_name) {\n        elemento.outerHTML = data.display_name;\n      } else {\n        elemento.outerHTML = data.id;\n      }\n    });\n  }\n  abrir(link) {\n    window.open(link, '_blank');\n  }\n  ponerFoto(link) {\n    const album = document.getElementById('fotoAlbum');\n    album.style.backgroundImage = `url('${link}')`;\n  }\n  modificadorBoton(time) {\n    var but = null;\n    const tipo = document.getElementById('tipo');\n    if (time == 'short_term') {\n      but = 'b1';\n      tipo.innerHTML = 'Last Month';\n    } else if (time == 'medium_term') {\n      but = 'b2';\n      tipo.innerHTML = 'Last 6 Months';\n    } else {\n      but = 'b3';\n      tipo.innerHTML = 'All Time';\n    }\n    const aux = document.getElementById(this.actual);\n    aux.className = 'btn btn-outline-secondary btn-lg btn-block rounded';\n    const tmp = document.getElementById(but);\n    tmp.className = 'btn btn-secondary btn-lg btn-block rounded';\n    this.actual = but;\n  }\n  getMyTracks(time) {\n    this.modificadorBoton(time);\n    this.authService.getApi().getMyTopTracks({\n      time_range: time,\n      limit: 10\n    }).then(response => {\n      this.ponerFoto(response.items[0].album.images[0].url);\n      for (let i = 0; i < response.items.length; i++) {\n        const cancion = document.getElementById(`cancion${i + 1}`);\n        cancion.innerHTML = `${i + 1}. ${response.items[i].name}`;\n        cancion.className = 'cursor';\n        cancion.addEventListener('click', () => {\n          this.abrir(response.items[i].uri);\n        });\n      }\n    }, err => {\n      this.logout();\n    });\n  }\n  logout() {\n    this.authService.logout();\n  }\n}\nDiskComponent.ɵfac = function DiskComponent_Factory(t) {\n  return new (t || DiskComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n};\nDiskComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DiskComponent,\n  selectors: [[\"app-disk\"]],\n  decls: 38,\n  vars: 0,\n  consts: [[1, \"centrado\", 2, \"margin-left\", \"70px\"], [\"src\", \"assets/nombre_transparente.png\", \"width\", \"500px\"], [1, \"centrado\", 2, \"margin-top\", \"10px\"], [\"id\", \"b1\", \"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [\"id\", \"b2\", \"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [\"id\", \"b3\", \"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [1, \"centrado\", 2, \"margin-top\", \"10px\", \"margin-left\", \"30px\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", \"btn-lg\", \"btn-block\", \"rounded\", 2, \"margin-left\", \"5px\", 3, \"click\"], [\"id\", \"img\", 2, \"position\", \"relative\", \"left\", \"0px\", \"bottom\", \"0px\"], [\"id\", \"fotoAlbum\", 1, \"album-cover\", \"eye\"], [1, \"vinyl-cover\"], [1, \"album-info\", \"texto\"], [\"id\", \"albumName\"], [\"id\", \"nombreCliente\"], [1, \"song-list\"], [1, \"column\"], [1, \"texto\"], [\"id\", \"cancion1\"], [\"id\", \"cancion2\", 1, \"back\"], [\"id\", \"cancion3\", 1, \"back\"], [\"id\", \"cancion4\", 1, \"back\"], [\"id\", \"cancion5\", 1, \"back\"], [\"id\", \"cancion6\", 1, \"back\"], [\"id\", \"cancion7\", 1, \"back\"], [\"id\", \"cancion8\", 1, \"back\"], [\"id\", \"cancion9\", 1, \"back\"], [\"id\", \"cancion10\", 1, \"back\"], [\"id\", \"tipo\"], [\"src\", \"assets/vinyl2.png\", 1, \"heaven\"]],\n  template: function DiskComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_3_listener() {\n        return ctx.getMyTracks(\"short_term\");\n      });\n      i0.ɵɵtext(4, \"Last Month\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"button\", 4);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_5_listener() {\n        return ctx.getMyTracks(\"medium_term\");\n      });\n      i0.ɵɵtext(6, \"Last 6 Months\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_7_listener() {\n        return ctx.getMyTracks(\"long_term\");\n      });\n      i0.ɵɵtext(8, \"All Time\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"div\", 6)(10, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function DiskComponent_Template_button_click_10_listener() {\n        return ctx.logout();\n      });\n      i0.ɵɵtext(11, \"Logout\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 8)(13, \"div\", 9);\n      i0.ɵɵelement(14, \"div\", 10);\n      i0.ɵɵelementStart(15, \"div\", 11)(16, \"h1\", 12);\n      i0.ɵɵtext(17, \"VINYLTIFY\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"h2\", 13);\n      i0.ɵɵtext(19, \"Artista\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"div\", 14)(21, \"div\", 15)(22, \"ul\", 16);\n      i0.ɵɵelement(23, \"li\", 17)(24, \"li\", 18)(25, \"li\", 19)(26, \"li\", 20)(27, \"li\", 21);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(28, \"div\", 15)(29, \"ul\", 16);\n      i0.ɵɵelement(30, \"li\", 22)(31, \"li\", 23)(32, \"li\", 24)(33, \"li\", 25)(34, \"li\", 26);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(35, \"h3\", 27);\n      i0.ɵɵtext(36, \"Artista\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(37, \"img\", 28);\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nDiskComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DiskComponent,\n  factory: DiskComponent.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"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","names":["DiskComponent","constructor","authService","route","ngOnInit","tieneError","snapshot","queryParams","undefined","token","fragment","split","find","includes","setAccessToken","getMe","getMyTracks","alert","logout","a","getApi","then","data","elemento","document","getElementById","display_name","outerHTML","id","abrir","link","window","open","ponerFoto","album","style","backgroundImage","modificadorBoton","time","but","tipo","innerHTML","aux","actual","className","tmp","getMyTopTracks","time_range","limit","response","items","images","url","i","length","cancion","name","addEventListener","uri","err","selectors","decls","vars","consts","template","i0","ctx","factory","providedIn"],"sourceRoot":"","sources":["/Users/sebastianqr.2208/Desktop/Status Tech/vinyltify/src/app/disk/disk.component.ts","/Users/sebastianqr.2208/Desktop/Status Tech/vinyltify/src/app/disk/disk.component.html"],"sourcesContent":["import {Component, Injectable, OnInit} from '@angular/core';\nimport { AuthService } from '../auth.service';\nimport SpotifyWebApi from 'spotify-web-api-js';\nimport { ActivatedRoute } from '@angular/router';\nimport { from } from 'rxjs';\nimport { Observable } from 'rxjs';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { catchError, map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\n@Component({\n  selector: 'app-disk',\n  templateUrl: './disk.component.html',\n  styleUrls: ['./disk.component.css']\n})\nexport class DiskComponent implements OnInit{\n  \n  actual = 'b1';\n \n  constructor(private authService: AuthService, private route: ActivatedRoute) {}\n  \n  ngOnInit(): void {\n    const tieneError = this.route.snapshot.queryParams['error'] !== undefined;\n    if(tieneError == true){\n      // @ts-ignore\n      const token = this.route.snapshot.fragment.split('&')\n          .find(fragment => fragment.includes('access_token'))\n          .split('=')[1];\n      // Guardar el token de acceso en el servicio de autenticación\n      this.authService.setAccessToken(token);\n      this.getMe();\n      this.getMyTracks('short_term');\n    }\n    else{\n      alert(\"entra\")\n      this.logout();\n    }\n  }\n  \n  getMe(){\n   var a = this.authService.getApi().getMe()\n   a.then((data) =>{\n     const elemento = document.getElementById('nombreCliente') as HTMLInputElement\n     if(data.display_name){\n       elemento.outerHTML = data.display_name;\n     }\n     else{\n       elemento.outerHTML = data.id;\n     }\n    })\n  }\n  \n  abrir(link:string){\n    window.open(link, '_blank');\n  }\n  \n  ponerFoto(link:string){\n    const album = document.getElementById('fotoAlbum') as HTMLInputElement\n    album.style.backgroundImage = `url('${link}')`\n  }\n  \n  modificadorBoton(time:string){\n    var but = null;\n    const tipo = document.getElementById('tipo') as HTMLInputElement;\n    if(time == 'short_term'){\n      but = 'b1';\n      tipo.innerHTML = 'Last Month'\n    }\n    else if(time == 'medium_term'){\n      but = 'b2';\n      tipo.innerHTML = 'Last 6 Months';\n    }\n    else{\n      but = 'b3';\n      tipo.innerHTML = 'All Time';\n    }\n    \n    \n    const aux = document.getElementById(this.actual) as HTMLInputElement;\n    aux.className = 'btn btn-outline-secondary btn-lg btn-block rounded';\n\n    const tmp = document.getElementById(but) as HTMLInputElement;\n    tmp.className = 'btn btn-secondary btn-lg btn-block rounded';\n    this.actual = but;\n  }\n  \n  getMyTracks(time:string){\n    this.modificadorBoton(time);\n    this.authService.getApi().getMyTopTracks({\n      time_range: time,\n      limit:10,\n    }).then((response) => {\n      this.ponerFoto(response.items[0].album.images[0].url)\n      for (let i = 0; i < response.items.length; i++) {\n        const cancion = document.getElementById(`cancion${i+1}`) as HTMLInputElement\n        cancion.innerHTML = `${i+1}. ${response.items[i].name}`;\n        cancion.className = 'cursor';\n        cancion.addEventListener('click', () => {\n          this.abrir(response.items[i].uri);\n        });\n      }\n    }, (err) =>{\n      this.logout();\n    })\n  }\n  \n  logout(){\n    this.authService.logout()\n  }\n}\n","<div class=\"centrado\" style=\"margin-left: 70px;\">\n    <img src=\"assets/nombre_transparente.png\" width=\"500px\">\n</div>\n\n\n<div class=\"centrado\" style=\"margin-top: 10px;\">\n    <button id=\"b1\" type=\"button\" class=\"btn btn-secondary btn-lg btn-block rounded\" style=\"margin-left: 5px;\" (click)=\"getMyTracks('short_term')\">Last Month</button>\n    <button id=\"b2\" type=\"button\" class=\"btn btn-outline-secondary btn-lg btn-block rounded\" style=\"margin-left: 5px;\"(click)=\"getMyTracks('medium_term')\">Last 6 Months</button>\n    <button id=\"b3\" type=\"button\" class=\"btn btn-outline-secondary btn-lg btn-block rounded\" style=\"margin-left: 5px;\"(click)=\"getMyTracks('long_term')\">All Time</button>\n</div>\n\n<div class=\"centrado\" style=\"margin-top: 10px; margin-left: 30px;\">\n    <button type=\"button\" class=\"btn btn-danger btn-lg btn-block rounded\" style=\"margin-left: 5px;\" (click)=\"logout()\">Logout</button>\n</div>\n\n\n\n<div style=\"position: relative; left: 0px; bottom: 0px;\" id=\"img\">\n    <div id=\"fotoAlbum\" class=\"album-cover eye\">\n        <div class=\"vinyl-cover\"></div>\n        <div class=\"album-info texto\">\n            <h1 id=\"albumName\">VINYLTIFY</h1>\n            <h2 id=\"nombreCliente\">Artista</h2>\n            <div class=\"song-list\">\n                <div class=\"column\">\n                    <ul class=\"texto\">\n                        <li id=\"cancion1\"></li>\n                        <li id=\"cancion2\" class=\"back\"></li>\n                        <li id=\"cancion3\" class=\"back\"></li>\n                        <li id=\"cancion4\" class=\"back\"></li>\n                        <li id=\"cancion5\" class=\"back\"></li>\n                    </ul>\n                </div>\n                <div class=\"column\">\n                    <ul class=\"texto\">\n                        <li id=\"cancion6\" class=\"back\"></li>\n                        <li id=\"cancion7\" class=\"back\"></li>\n                        <li id=\"cancion8\" class=\"back\"></li>\n                        <li id=\"cancion9\" class=\"back\"></li>\n                        <li id=\"cancion10\" class=\"back\"></li>\n                    </ul>\n                </div>\n            </div>\n            <h3 id=\"tipo\">Artista</h3>\n        </div>\n    </div>\n    <img src=\"assets/vinyl2.png\" class=\"heaven\"/>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}